(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c9548"],{"594b":function(e,t,a){"use strict";a.r(t);a("5b81"),a("d9e2"),a("14d9");var l=a("7a23"),c=a("6605"),n=(a("8c56"),a("1494")),o=a("6a92"),b=a("192b");const s={style:{"max-width":"700px",margin:"auto"}},r=Object(l["h"])("h1",null,[Object(l["h"])("strong",null,"Editar Artista")],-1),i={class:"mb-3"},u=Object(l["h"])("label",{class:"form-label",for:"nombreArtista"},"Nombre",-1),m={class:"mb-3"},d=Object(l["h"])("label",{class:"form-label",for:"bioArtista"},"Biografia",-1),O={class:"mb-3"},j=Object(l["h"])("label",{class:"form-label"},"Banner",-1),p=["src"],h={class:"mb-4"},f=Object(l["h"])("h4",null,[Object(l["h"])("strong",null,"Álbum")],-1),g={class:"mb-3"},v=Object(l["h"])("label",{class:"form-label"},"Nombre",-1),y=["onUpdate:modelValue"],w={class:"mb-3"},k=Object(l["h"])("label",{class:"form-label"},"Fecha de lanzamiento",-1),x=["onUpdate:modelValue"],C={class:"mb-3"},U=Object(l["h"])("label",{class:"form-label"}," Caratula ",-1),V=["onChange"],A=["src"],B={class:"canciones"},D=Object(l["h"])("h5",null,"Canciones",-1),R={class:"form-cancion mb-2"},z={class:"row"},_={class:"col-lg-1 pe-0 align-self-center"},F={class:"col-lg-5 ps-0"},E=["onUpdate:modelValue"],N={class:"col-lg-4 ps-0"},S=["onUpdate:modelValue"],G={class:"col-lg-2"},H=["onUpdate:modelValue"],J=["onClick"],L=Object(l["h"])("hr",null,null,-1),P=["onClick"],I=["onClick"];var T={__name:"EditarArtista",setup(e){const t=Object(c["d"])(),a=Object(l["G"])(null),T=Object(l["F"])({nombre:null,banner:{data:null,tempData:null},biografia:"",albumes:[{nombre:null,fecha_lanzamiento:null,cover:{data:null,tempData:null},canciones:[{nombre:null,duracion:null,interprete:null}]}]});async function q(){const e=Object(o["c"])(),t=Object(o["d"])(e,"artistas"),l=(Object(o["d"])(t,T.nombre.replaceAll(" ","-").toLowerCase()),T.albumes.map(async(e,t)=>{e.cover.data.file}));await Promise.all(l).then(async()=>{const e=Object(n["c"])(apolusFirebase,"artistas",a.value.id);await Object(n["i"])(e,{albumes:T.albumes}),console.log("Artista actualizado con exito.")})}function K(){T.albumes.push({nombre:null,fecha_lanzamiento:null,cover:{data:null,tempData:null},canciones:[{nombre:null,duracion:null}]})}function M(e){T.albumes[e].canciones.push({nombre:null,duracion:null})}async function Q(e,t){T.albumes[t].cover.data={url:await Object(b["a"])(e),file:e.target.files[0]}}async function W(e){T.banner.tempData={url:await Object(b["a"])(e),file:e.target.files[0]}}return async function(){try{let e=await apolusFirebase.collection("artistas").doc(t.params.id).get();if(e.empty)throw Error("That post does not exist");{console.log(e.id);const t=e.data();a.value={...t,id:e.id},console.log(a.value)}}catch(e){console.log(e)}}(),Object(l["P"])(a,(e,t)=>{e&&(T.nombre=e.nombre,T.banner.tempData=e.banner.data,T.biografia=e.biografia,T.albumes=e.albumes)}),(e,t)=>(Object(l["B"])(),Object(l["g"])("div",s,[r,Object(l["h"])("form",null,[Object(l["h"])("div",i,[u,Object(l["R"])(Object(l["h"])("input",{class:"form-control",type:"text",id:"nombreArtista","onUpdate:modelValue":t[0]||(t[0]=e=>T.nombre=e)},null,512),[[l["O"],T.nombre]])]),Object(l["h"])("div",m,[d,Object(l["R"])(Object(l["h"])("textarea",{class:"form-control",type:"text",id:"bioArtista","onUpdate:modelValue":t[1]||(t[1]=e=>T.biografia=e)},"\r\n      ",512),[[l["O"],T.biografia]])]),Object(l["h"])("div",O,[j,Object(l["h"])("input",{class:"form-control",type:"file",onChange:t[2]||(t[2]=e=>W(e))},null,32),T.banner.tempData?(Object(l["B"])(),Object(l["g"])("img",{key:0,class:"img-fluid my-3",src:T.banner.tempData.url},null,8,p)):Object(l["f"])("",!0)]),(Object(l["B"])(!0),Object(l["g"])(l["a"],null,Object(l["H"])(T.albumes,(e,t)=>(Object(l["B"])(),Object(l["g"])("div",h,[f,Object(l["h"])("div",g,[v,Object(l["R"])(Object(l["h"])("input",{class:"form-control",type:"text","onUpdate:modelValue":t=>e.nombre=t},null,8,y),[[l["O"],e.nombre]])]),Object(l["h"])("div",w,[k,Object(l["R"])(Object(l["h"])("input",{class:"form-control",type:"text","onUpdate:modelValue":t=>e.fecha_lanzamiento=t},null,8,x),[[l["O"],e.fecha_lanzamiento]])]),Object(l["h"])("div",C,[U,Object(l["h"])("input",{class:"form-control",type:"file",onChange:e=>Q(e,t)},null,40,V)]),e.cover.data?(Object(l["B"])(),Object(l["g"])("img",{key:0,class:"img-fluid my-3",src:e.cover.data.url},null,8,A)):Object(l["f"])("",!0),Object(l["h"])("div",B,[D,(Object(l["B"])(!0),Object(l["g"])(l["a"],null,Object(l["H"])(e.canciones,(e,t)=>(Object(l["B"])(),Object(l["g"])("div",R,[Object(l["h"])("div",z,[Object(l["h"])("div",_,[Object(l["h"])("span",null,Object(l["L"])(t+1),1)]),Object(l["h"])("div",F,[Object(l["R"])(Object(l["h"])("input",{class:"form-control","onUpdate:modelValue":t=>e.nombre=t,type:"text",placeholder:"Nombre"},null,8,E),[[l["O"],e.nombre]])]),Object(l["h"])("div",N,[Object(l["R"])(Object(l["h"])("input",{class:"form-control","onUpdate:modelValue":t=>e.interprete=t,type:"text",placeholder:"Interpretes"},null,8,S),[[l["O"],e.interprete]])]),Object(l["h"])("div",G,[Object(l["R"])(Object(l["h"])("input",{class:"form-control","onUpdate:modelValue":t=>e.duracion=t,type:"text",placeholder:"Duración"},null,8,H),[[l["O"],e.duracion]])])])]))),256)),Object(l["h"])("button",{class:"btn btn-secondary btn-sm ms-auto d-block",onClick:Object(l["S"])(e=>M(t),["prevent"])}," Añadir nueva canción",8,J)]),L]))),256)),Object(l["h"])("button",{class:"btn btn-secondary btn-md ms-auto d-block",onClick:Object(l["S"])(K,["prevent"])}," Añadir nuevo álbum",8,P),Object(l["h"])("button",{class:"btn btn-primary ms-auto d-block mt-5",onClick:Object(l["S"])(q,["prevent"]),type:"submit"},"Guardar Artista",8,I)])]))}};const q=T;t["default"]=q}}]);
//# sourceMappingURL=chunk-2d0c9548.ea5de943.js.map